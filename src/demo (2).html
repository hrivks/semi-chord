<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>semi-chord demo</title>
    <meta name="description" content="demo page for semi-chord">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <!--D3-->
    <script src="../node_modules/d3/build/d3.min.js"></script>
    <!--semi-chord-->
    <script src="semi-chord._SC.js"></script>
    <script src="semi-chord.validation.js"></script>
    <script src="semi-chord.utils.js"></script>
    <script src="semi-chord.computation.js"></script>
    <script src="semi-chord.drawing.js"></script>
    <script src="semi-chord.interactions.js"></script>
    <script src="semi-chord.highlighting.js"></script>
    <script src="semi-chord.export.js"></script>
    <script src="semi-chord.js"></script>

    <style>
        .d-visible-portrait {
            display: none;
        }
        
        @media screen and (orientation: portrait) {
            .d-visible-portrait {
                display: block;
            }
        }
    </style>

    <script>
        // just demo. globals are oK!
        var scObj;

        function loadData() {
            return JSON.parse(document.getElementsByTagName('textarea')[0].value);
        }

        function onLoad() {
            var data = loadData();
            var dataKey = document.getElementById("dataKey").value;
            scObj = semiChord({
                selector: '#scContainer1',
                data: data,
                dataKey: dataKey
            });
        }

        function onDataUpdate() {
            var data = JSON.parse(document.getElementsByTagName('textarea')[0].value);
            var dataKey = document.getElementById("dataKey").value;
            scObj.update(data, null, dataKey);
        }
    </script>

</head>

<body>
    <div class="container-fluid">
        <div class="row mt-3">
            <div class="col-xs-12 col-sm-8">
                <p class="d-visible-portrait text-muted text-center">
                    <em>This site is best viewed in landscape mode. Tilt your device for a better experience</em>
                </p>

                <h3 class="text-center text-muted">Sales by year</h3>
                <div id="scContainer1" class="w-100 border border-top-0 border-bottom-0 border-left-0" style="height: 80vmin">
                </div>
            </div>
            <div class="col-xs-12 col-sm-4">
                <div class="form-group">
                    <label class="font-weight-bold">Data</label>
                    <textarea class="form-control" style="height:350px">
[{
    "product":"A",
    "2014":"34.5K",
    "2015":"24.1K",
    "2016":"12.5K",
    "2017":"29.9K"
},
{
    "product":"B",
    "2014":"54.5K",
    "2015":"23.1K",
    "2016":"2.5K",
    "2017":"10.9K"
},
{
    "product":"C",
    "2014":"29.2K",
    "2015":"13.4K",
    "2016":"27.8K",
    "2017":"18.3K"
},
{
    "product":"D",
    "2014":"11.5K",
    "2015":"28.3K",
    "2016":"18.4K",
    "2017":"19.9K"
}]
                    </textarea>

                    <label for="dataKey" class="font-weight-bold mt-3">Data Key</label>
                    <input class="form-control" type="text" id="dataKey" value="product" />
                    <div class="btn btn-primary" onclick="onDataUpdate()">Update</div>
                </div>
            </div>
        </div>
    </div>



    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-43791818-2"></script>
    <script>
        var dataa = [{
            'product': 'A',
            '2014': '34.5K',
            '2015': '24.1K',
            '2016': '12.5K',
            '2017': '29.9K'
        }, {
            'product': 'B',
            '2014': '54.5K',
            '2015': '23.1K',
            '2016': '2.5K',
            '2017': '10.9K'
        }, {
            'product': 'C',
            '2014': '29.2K',
            '2015': '13.4K',
            '2016': '27.8K',
            '2017': '18.3K'
        }, {
            'product': 'D',
            '2014': '11.5K',
            '2015': '28.3K',
            '2016': '18.4K',
            '2017': '19.9K'
        }];

        onLoad();
    </script>

</body>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-43791818-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments)
    };
    gtag('js', new Date());

    gtag('config', 'UA-43791818-2');

    gtag('set', 'dimension2', 'semi-chord');
</script>

</html>